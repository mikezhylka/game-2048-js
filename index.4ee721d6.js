new class{constructor(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.ROWS_NODE=[...document.querySelectorAll(".field-row")],this.LOSE_MESSAGE_NODE=document.querySelector(".message-lose"),this.WIN_MESSAGE_NODE=document.querySelector(".message-win"),this.SCORE_NODE=document.querySelector(".game-score"),this.gameActive=!0,this.remove=!1}moveCells(){let e=null,t=null;document.addEventListener("touchstart",s=>{e=s.touches[0].clientX,t=s.touches[0].clientY}),document.addEventListener("touchmove",s=>{if(!e||!t)return;let l=s.touches[0].clientX,i=s.touches[0].clientY,a=l-e,h=i-t;Math.abs(a)>Math.abs(h)?a<0?r("left"):r("right"):h<0?o("up"):o("down"),e=null,t=null});let s=e=>{this.arraysEqual(this.board,e)||(this.board=e,this.updateBoard(),this.getScore(),this.placeRandomTile(),this.checkGameOver(),this.checkWin())},r=e=>{let t=[];this.board.forEach(s=>{let r=s.filter(e=>0!==e);"right"===e&&(r=r.reverse());for(let e=0;e<r.length-1;e++)r[e]===r[e+1]&&(r[e]*=2,r[e+1]=0,this.score+=r[e],this.scoreChangeColor());for(r=r.filter(e=>0!==e);r.length<4;)r.push(0);"right"===e&&(r=r.reverse()),t.push(r)}),s(t)},o=e=>{let t=[[],[],[],[]],s=[[],[],[],[]];for(let e=0;e<this.board.length;e++)for(let s=0;s<this.board.length;s++)0!==this.board[s][e]&&t[e].push(this.board[s][e]);for(let s=0;s<t.length;s++)if("up"===e){for(let e=0;e<t[s].length;e++)t[s][e]===t[s][e+1]&&(t[s][e]*=2,t[s][e+1]=0,this.score+=t[s][e],this.scoreChangeColor());for(t[s]=t[s].filter(e=>0!==e);t[s].length<4;)t[s].push(0)}else if("down"===e){let e=!0;for(let r=t[s].length-1;r>=0;r--)t[s][r]===t[s][r-1]&&e&&(t[s][r]*=2,t[s][r-1]=0,this.score+=t[s][r],this.scoreChangeColor(),e=!1);for(t[s]=t[s].filter(e=>0!==e);t[s].length<4;)t[s].unshift(0)}for(let e=0;e<t.length;e++)for(let r=0;r<t.length;r++)s[r][e]=t[e][r];this.arraysEqual(this.board,s)||(this.board=s,this.updateBoard(),this.getScore(),this.placeRandomTile(),this.checkGameOver(),this.checkWin())};document.addEventListener("keydown",e=>{if(this.gameActive)switch(e.key){case"ArrowUp":o("up");break;case"ArrowDown":o("down");break;case"ArrowLeft":r("left");break;case"ArrowRight":r("right")}})}updateBoard(){this.ROWS_NODE.forEach((e,t)=>{[...e.cells].forEach((e,s)=>{let r=this.board[t][s];e.textContent!==r&&(0===r?(e.className="field-cell",e.textContent=""):(e.textContent=r,e.className=`field-cell field-cell--${r}`))})})}arraysEqual(e,t){for(let s=0;s<e.length;s++)for(let r=0;r<e.length;r++)if(e[s][r]!==t[s][r])return!1;return!0}getScore(){this.SCORE_NODE.innerHTML=`${this.score}`}start(){this.clickStartButton(),this.moveCells()}placeRandomTile(){let e=[];for(let t=0;t<4;t++)for(let s=0;s<4;s++)0===this.board[t][s]&&e.push({row:t,cell:s});if(e.length>0){let t=Math.floor(Math.random()*e.length),s=.1>=Math.random()?4:2,{row:r,cell:o}=e[t];this.board[r][o]=s;let l=this.ROWS_NODE[r].children[o];l.classList.add(`field-cell--${s}`),l.innerHTML=s.toString(),l.style="color: #FF7F50",setTimeout(()=>{l.style=""},400)}}clickStartButton(){document.querySelector(".button").addEventListener("click",()=>{if(!this.remove){this.changeStartNodes(),this.placeRandomTile(),this.placeRandomTile(),this.remove=!0;return}this.changeRestartNodes()})}resetBoard(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.ROWS_NODE.forEach(e=>{e.childNodes.forEach(e=>{e.innerHTML="",e.className="field-cell"})})}resetScore(){this.score=0,this.SCORE_NODE.innerHTML="0"}checkGameOver(){(()=>{let e=!0;return this.board.forEach(t=>{void 0!==t.find(e=>0===e)&&(e=!1)}),e})()&&(this.gameActive=!1,this.ROWS_NODE.forEach(e=>{[...e.cells].forEach(e=>{e.style="color: #FF7F50",setTimeout(()=>{e.style=""},500)})}),this.LOSE_MESSAGE_NODE.classList.remove("hidden"))}checkWin(){(()=>{let e=!1;return this.board.forEach(t=>{void 0!==t.find(e=>2048===e)&&(e=!0)}),e})()&&(this.gameActive=!1,this.WIN_MESSAGE_NODE.classList.remove("hidden"))}scoreChangeColor(){this.SCORE_NODE.style="color: #FF7F50",setTimeout(()=>{this.SCORE_NODE.style=""},400)}changeStartNodes(){let e=document.querySelector(".button.start"),t=document.querySelector(".message.message-start");t.innerHTML="Your ad can be here",t.classList.replace("message-start","message-restart"),e.innerHTML="Restart",e.classList.replace("start","restart"),this.WIN_MESSAGE_NODE.classList.toggle("hidden",!0),this.gameActive=!0}changeRestartNodes(){let e=document.querySelector(".button.restart"),t=document.querySelector(".message.message-restart");null!==e&&(this.WIN_MESSAGE_NODE.classList.add("hidden"),this.remove=!0,this.resetBoard(),this.resetScore(),t.innerHTML='Press "Start" to begin game. <br> Good luck!',e.innerHTML="Start",e.classList.replace("restart","start"),t.classList.replace("message-restart","message-start"),this.LOSE_MESSAGE_NODE.classList.toggle("hidden",!0)),this.remove=!1}}().start();
//# sourceMappingURL=index.4ee721d6.js.map
